# 外部中断与按键触发

中断是啥？
一个时间打断正常运行的程序，我们称之为中断。

主程序，我们也称之为前台程序，通常是一个循环，循环中调用函数执行各种操作。
中断，就是当产生一个新事件时，打断主程序，运行处理这个事件的程序，这个程序我们叫它中断服务程序。

为什么要中断？

我们拿一个IO口的状态输入做说明。
用客人来你家做对比。

前面我们做按键输入时，是间隔几毫秒就查询一下IO的状态。
相当于，你在家，为了知道有没有人到访，隔几分钟就去门口看下。
那中断呢，就相当于在门口装个门铃，你在家里看电影，当有人来时，按下门铃，然后你出去开门拿快递。
拿完快递了，回来继续看电影。

这里要说明的是，一个芯片有很多外设，每个外设都有各种中断。只有我们使能时，这些中断才会起作用。

画一个IO口的中断说明。
IO配置，使能后。
状态变化，产生事件标志，状态寄存器，如果使能了中断，就会产生中断，CPU的中断管理NVIC就会自动操作，
从中断向量表找到对应中断的函数指针，执行中断服务程序。执行完之后就返回原来的位置继续执行。


IO口中断说明。

参考官方例程。STM32F10x_StdPeriph_Lib_V3.5.0\Project\STM32F10x_StdPeriph_Examples\EXTI\EXTI_Config

分析官方例程。


从中断向量表可以看到，有些外部中断时公用一个中断入口。


按键在八位数码管上显示按键位置，没有防抖动。



